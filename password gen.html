<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Goede Wachtwoord‑Generator</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #1e1e1e; /* dark grey background */
    margin: 2rem;
    color: #f0f0f0; /* light text */
  }
  .container {
    background: #2a2a2a; /* slightly lighter dark grey */
    max-width: 500px;
    margin: auto;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.6);
  }
  h1 { margin-bottom: 1rem; color: #fff; }
  .field { margin-bottom: 1rem; }
  label { display: block; margin-bottom: .4rem; font-weight: 600; color: #ddd; }
  input[type="number"] {
    width: 80px;
    background:#333;
    color:#fff;
    border:1px solid #555;
    padding:.3rem;
    border-radius:4px;
  }
  input[type="checkbox"] {
    accent-color: #ff4da6; /* pink checkboxes */
  }
  button {
    padding: .6rem 1.2rem;
    background: #ff4da6; /* pink button */
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
  button:hover {
    background: #e04394; /* darker pink on hover */
  }
  #generated {
    font-family: monospace;
    font-size: 1.3rem;
    background:#333;
    color:#fff;
    padding:.6rem 1rem;
    border-radius:4px;
    margin-top:.6rem;
    display: inline-block;
  }
  .copy {
    background:#ff4da6;
    margin-left:.8rem;
  }
  .copy:hover {
    background:#e04394;
  }
</style>
</head>
<body>

<div class="container">
  <h1>Wachtwoord‑Generator</h1>

  <div class="field">
    <label for="length">Lengte (8‑128)</label>
    <input type="number" id="length" value="12" min="8" max="128">
  </div>

  <div class="field">
    <input type="checkbox" id="uppercase" checked>
    <label for="uppercase">Hoofdletters</label>
  </div>

  <div class="field">
    <input type="checkbox" id="lowercase" checked>
    <label for="lowercase">Kleine letters</label>
  </div>

  <div class="field">
    <input type="checkbox" id="numbers" checked>
    <label for="numbers">Cijfers</label>
  </div>

  <div class="field">
    <input type="checkbox" id="symbols" checked>
    <label for="symbols">Speciale tekens (!@#$%^&*()_+[]{}|;:,.<>/?)</label>
  </div>

  <button id="generate">Genereer wachtwoord</button>

  <div id="result"></div>
</div>

<script>
"use strict";

/* Karaktersets */
const CHARSETS = {
  uppercase: "ABCDEFGHIJKLMNOPQRSTUVWXYZ",
  lowercase: "abcdefghijklmnopqrstuvwxyz",
  numbers:  "0123456789",
  symbols:  "!@#$%^&*()_+[]{}|;:,.<>/?"
};

function randomString(chars, len) {
  const result = [];
  const values = new Uint32Array(len);
  crypto.getRandomValues(values);
  const max = chars.length;
  for (let i = 0; i < len; i++) {
    result.push(chars.charAt(values[i] % max));
  }
  return result.join('');
}

function ensureRequiredTypes(arr, required) {
  required.forEach(type => {
    const charset = CHARSETS[type];
    const hasType = arr.some(ch => charset.includes(ch));
    if (!hasType) {
      const pos = Math.floor(Math.random() * arr.length);
      const idx = crypto.getRandomValues(new Uint32Array(1))[0] % charset.length;
      arr[pos] = charset.charAt(idx);
    }
  });
}

function generatePassword() {
  const len = parseInt(document.getElementById('length').value, 10);
  if (len < 8 || len > 128) {
    alert('Lengte moet tussen 8 en 128 liggen.');
    return;
  }

  const types = [];
  if (document.getElementById('uppercase').checked) types.push('uppercase');
  if (document.getElementById('lowercase').checked) types.push('lowercase');
  if (document.getElementById('numbers').checked)  types.push('numbers');
  if (document.getElementById('symbols').checked)  types.push('symbols');

  if (types.length === 0) {
    alert('Selecteer minstens één type teken.');
    return;
  }

  let allChars = '';
  types.forEach(t => allChars += CHARSETS[t]);

  const pwdArray = randomString(allChars, len).split('');
  ensureRequiredTypes(pwdArray, types);

  const password = pwdArray.join('');
  displayResult(password);
}

function displayResult(pwd) {
  const resultDiv = document.getElementById('result');
  resultDiv.innerHTML = `
    <div id="generated">${pwd}</div>
    <button class="copy" id="copyBtn">Kopieer</button>
  `;
  document.getElementById('copyBtn').addEventListener('click', () => {
    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(pwd)
        .then(() => alert('Wachtwoord gekopieerd!'))
        .catch(() => fallbackCopy(pwd));
    } else {
      fallbackCopy(pwd);
    }
  });
}

function fallbackCopy(text) {
  const textarea = document.createElement('textarea');
  textarea.value = text;
  textarea.style.position = 'fixed';
  document.body.appendChild(textarea);
  textarea.focus();
  textarea.select();
  try {
    document.execCommand('copy');
    alert('Wachtwoord gekopieerd (fallback)!');
  } catch (e) {
    alert('Kopiëren niet mogelijk. Kopieer handmatig.');
  }
  document.body.removeChild(textarea);
}

document.getElementById('generate').addEventListener('click', generatePassword);
</script>
</body>
</html>